{
  "log": {
    "version": "1.2",
    "creator": {
      "name": "Firefox",
      "version": "138.0.3"
    },
    "browser": {
      "name": "Firefox",
      "version": "138.0.3"
    },
    "pages": [
      {
        "id": "page_15",
        "pageTimings": {
          "onContentLoad": 157,
          "onLoad": 493
        },
        "startedDateTime": "2025-05-16T16:45:13.519+03:00",
        "title": "http://localhost:9090/web/sources/callback/1e84bc4b-be8f-45d6-ad47-d621b00212a4?code=eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdWQiOiJ1cm46b2lkOjEuMi44NDAuMTE0MzUwLjEuMTMuMC4xLjcuMy42ODg4ODQuMTAwIiwiY2xpZW50X2lkIjoiYTI0MzZiZDEtMjM4Zi00Zjc0LThlNWEtYWYwZGJkNmZmMWRmIiwiZXBpYy5lY2kiOiJ1cm46ZXBpYzpPcGVuLkVwaWMtY3VycmVudCIsImVwaWMubWV0YWRhdGEiOiJHcnl2dUtIRnVXb2NGWTFVY3p4V0FZOUN4QnFtSm9Pb1E5V3dwWElibUNHckZHNHJrQ2U3cjY5THMxNVV2OGVKT2dUSnJNaU0tM21JM20tZzhTdm9sOUhXbmdsNkduSDhUVXVKekFSa0JvdVNxdkhiYjRteTdhNFQtVmpEZDFOWSIsImVwaWMudG9rZW50eXBlIjoiY29kZSIsImV4cCI6MTc0NzQwMzQxMCwiaWF0IjoxNzQ3NDAzMTEwLCJpc3MiOiJ1cm46b2lkOjEuMi44NDAuMTE0MzUwLjEuMTMuMC4xLjcuMy42ODg4ODQuMTAwIiwianRpIjoiMzczZDg3MzgtNTM3Zi00NDg2LThmZDItZjViODNlZTI3MDQxIiwibmJmIjoxNzQ3NDAzMTEwLCJzdWIiOiJlYjRHaWE3RnlpanRQbVhrcnRqUnBQdzMifQ.fJ9vipxsBWlJz_PyfR_nd6AXF9zDkpWXIz9yQKxNml6EwuU89fXUvQEMOmg6j2ZZQd94zbIfOkEFZczfByydVThkP6scJNHAJWrH0ZyVOMradojabJvUBttUaNcTIuyMsbY5NqHXVHgNV-16MEF8zdsWXlUYan36usN3ZZMMYu6wQnmDXM9mHWqSxSNp753IRjzOLZsyvW3Uisy6Oe4tkyXtNLRxn4QX-UJOxHzloc4cVKW_7hMcmT8QHJU4ZFwEwegJB3oujuwSCca_Vw-CD36XYzyHfB4drPV6zAqbFdXDDp4e6-5zYhWdUg7CaabZEmHuokGP0t0a4EgWNfJAfA&state=1e84bc4b-be8f-45d6-ad47-d621b00212a4"
      }
    ],
    "entries": [
      {
        "startedDateTime": "2025-05-16T16:45:13.519+03:00",
        "request": {
          "bodySize": 0,
          "method": "GET",
          "url": "https://lighthouse.fastenhealth.com/sandbox/callback/epic?code=eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdWQiOiJ1cm46b2lkOjEuMi44NDAuMTE0MzUwLjEuMTMuMC4xLjcuMy42ODg4ODQuMTAwIiwiY2xpZW50X2lkIjoiYTI0MzZiZDEtMjM4Zi00Zjc0LThlNWEtYWYwZGJkNmZmMWRmIiwiZXBpYy5lY2kiOiJ1cm46ZXBpYzpPcGVuLkVwaWMtY3VycmVudCIsImVwaWMubWV0YWRhdGEiOiJHcnl2dUtIRnVXb2NGWTFVY3p4V0FZOUN4QnFtSm9Pb1E5V3dwWElibUNHckZHNHJrQ2U3cjY5THMxNVV2OGVKT2dUSnJNaU0tM21JM20tZzhTdm9sOUhXbmdsNkduSDhUVXVKekFSa0JvdVNxdkhiYjRteTdhNFQtVmpEZDFOWSIsImVwaWMudG9rZW50eXBlIjoiY29kZSIsImV4cCI6MTc0NzQwMzQxMCwiaWF0IjoxNzQ3NDAzMTEwLCJpc3MiOiJ1cm46b2lkOjEuMi44NDAuMTE0MzUwLjEuMTMuMC4xLjcuMy42ODg4ODQuMTAwIiwianRpIjoiMzczZDg3MzgtNTM3Zi00NDg2LThmZDItZjViODNlZTI3MDQxIiwibmJmIjoxNzQ3NDAzMTEwLCJzdWIiOiJlYjRHaWE3RnlpanRQbVhrcnRqUnBQdzMifQ.fJ9vipxsBWlJz_PyfR_nd6AXF9zDkpWXIz9yQKxNml6EwuU89fXUvQEMOmg6j2ZZQd94zbIfOkEFZczfByydVThkP6scJNHAJWrH0ZyVOMradojabJvUBttUaNcTIuyMsbY5NqHXVHgNV-16MEF8zdsWXlUYan36usN3ZZMMYu6wQnmDXM9mHWqSxSNp753IRjzOLZsyvW3Uisy6Oe4tkyXtNLRxn4QX-UJOxHzloc4cVKW_7hMcmT8QHJU4ZFwEwegJB3oujuwSCca_Vw-CD36XYzyHfB4drPV6zAqbFdXDDp4e6-5zYhWdUg7CaabZEmHuokGP0t0a4EgWNfJAfA&state=1e84bc4b-be8f-45d6-ad47-d621b00212a4",
          "httpVersion": "HTTP/2",
          "headers": [
            {
              "name": "Host",
              "value": "lighthouse.fastenhealth.com"
            },
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:138.0) Gecko/20100101 Firefox/138.0"
            },
            {
              "name": "Accept",
              "value": "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8"
            },
            {
              "name": "Accept-Language",
              "value": "en-US,en;q=0.5"
            },
            {
              "name": "Accept-Encoding",
              "value": "gzip, deflate, br, zstd"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "Upgrade-Insecure-Requests",
              "value": "1"
            },
            {
              "name": "Sec-Fetch-Dest",
              "value": "document"
            },
            {
              "name": "Sec-Fetch-Mode",
              "value": "navigate"
            },
            {
              "name": "Sec-Fetch-Site",
              "value": "cross-site"
            },
            {
              "name": "Priority",
              "value": "u=0, i"
            },
            {
              "name": "Pragma",
              "value": "no-cache"
            },
            {
              "name": "Cache-Control",
              "value": "no-cache"
            }
          ],
          "cookies": [],
          "queryString": [
            {
              "name": "code",
              "value": "eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdWQiOiJ1cm46b2lkOjEuMi44NDAuMTE0MzUwLjEuMTMuMC4xLjcuMy42ODg4ODQuMTAwIiwiY2xpZW50X2lkIjoiYTI0MzZiZDEtMjM4Zi00Zjc0LThlNWEtYWYwZGJkNmZmMWRmIiwiZXBpYy5lY2kiOiJ1cm46ZXBpYzpPcGVuLkVwaWMtY3VycmVudCIsImVwaWMubWV0YWRhdGEiOiJHcnl2dUtIRnVXb2NGWTFVY3p4V0FZOUN4QnFtSm9Pb1E5V3dwWElibUNHckZHNHJrQ2U3cjY5THMxNVV2OGVKT2dUSnJNaU0tM21JM20tZzhTdm9sOUhXbmdsNkduSDhUVXVKekFSa0JvdVNxdkhiYjRteTdhNFQtVmpEZDFOWSIsImVwaWMudG9rZW50eXBlIjoiY29kZSIsImV4cCI6MTc0NzQwMzQxMCwiaWF0IjoxNzQ3NDAzMTEwLCJpc3MiOiJ1cm46b2lkOjEuMi44NDAuMTE0MzUwLjEuMTMuMC4xLjcuMy42ODg4ODQuMTAwIiwianRpIjoiMzczZDg3MzgtNTM3Zi00NDg2LThmZDItZjViODNlZTI3MDQxIiwibmJmIjoxNzQ3NDAzMTEwLCJzdWIiOiJlYjRHaWE3RnlpanRQbVhrcnRqUnBQdzMifQ.fJ9vipxsBWlJz_PyfR_nd6AXF9zDkpWXIz9yQKxNml6EwuU89fXUvQEMOmg6j2ZZQd94zbIfOkEFZczfByydVThkP6scJNHAJWrH0ZyVOMradojabJvUBttUaNcTIuyMsbY5NqHXVHgNV-16MEF8zdsWXlUYan36usN3ZZMMYu6wQnmDXM9mHWqSxSNp753IRjzOLZsyvW3Uisy6Oe4tkyXtNLRxn4QX-UJOxHzloc4cVKW_7hMcmT8QHJU4ZFwEwegJB3oujuwSCca_Vw-CD36XYzyHfB4drPV6zAqbFdXDDp4e6-5zYhWdUg7CaabZEmHuokGP0t0a4EgWNfJAfA"
            },
            {
              "name": "state",
              "value": "1e84bc4b-be8f-45d6-ad47-d621b00212a4"
            }
          ],
          "headersSize": 1614
        },
        "response": {
          "status": 200,
          "statusText": "",
          "httpVersion": "HTTP/2",
          "headers": [
            {
              "name": "date",
              "value": "Fri, 16 May 2025 13:45:14 GMT"
            },
            {
              "name": "content-type",
              "value": "text/html"
            },
            {
              "name": "content-length",
              "value": "16620"
            },
            {
              "name": "apigw-requestid",
              "value": "KqcomgnCoAMEJQA="
            },
            {
              "name": "X-Firefox-Spdy",
              "value": "h2"
            }
          ],
          "cookies": [],
          "content": {
            "mimeType": "text/html",
            "size": 16620,
            "text": "<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n\n    \n    <meta charset=\"utf-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1, shrink-to-fit=no\">\n\n\n    \n    <meta name=\"description\" content=\"Fasten securely connected to EPIC\">\n    <meta name=\"author\" content=\"Fasten\">\n\n    <title>Fasten connected to EPIC</title>\n\n    \n    <style>\n        @import url(\"https://fonts.googleapis.com/css?family=Roboto:300,400,500,700,900\");\n        @import url(\"https://fonts.googleapis.com/css?family=Montserrat:300,400,500,600,700,800\");\n        @import url(\"https://fonts.googleapis.com/css?family=Raleway:400,500,600,700,800\");\n        @import url(\"https://fonts.googleapis.com/css?family=Poppins:200,300,400,600,700,800\");\n\n        :root {\n            --bs-blue: #3366ff;\n            --bs-indigo: #5b47fb;\n            --bs-purple: #6f42c1;\n            --bs-pink: #f10075;\n            --bs-red: #dc3545;\n            --bs-orange: #fd7e14;\n            --bs-yellow: #ffc107;\n            --bs-green: #3bb001;\n            --bs-teal: #00cccc;\n            --bs-cyan: #0dcaf0;\n            --bs-white: #fff;\n            --bs-gray: #7987a1;\n            --bs-gray-dark: #3b4863;\n            --bs-gray-100: #f4f5f8;\n            --bs-gray-200: #e3e7ed;\n            --bs-gray-300: #cdd4e0;\n            --bs-gray-400: #b4bdce;\n            --bs-gray-500: #97a3b9;\n            --bs-gray-600: #7987a1;\n            --bs-gray-700: #596882;\n            --bs-gray-800: #3b4863;\n            --bs-gray-900: #1c273c;\n            --bs-primary: #3366ff;\n            --bs-secondary: #7987a1;\n            --bs-success: #3bb001;\n            --bs-info: #0dcaf0;\n            --bs-warning: #ffc107;\n            --bs-danger: #dc3545;\n            --bs-light: #f4f5f8;\n            --bs-dark: #1c273c;\n            --bs-primary-rgb: 51, 102, 255;\n            --bs-secondary-rgb: 121, 135, 161;\n            --bs-success-rgb: 59, 176, 1;\n            --bs-info-rgb: 13, 202, 240;\n            --bs-warning-rgb: 255, 193, 7;\n            --bs-danger-rgb: 220, 53, 69;\n            --bs-light-rgb: 244, 245, 248;\n            --bs-dark-rgb: 28, 39, 60;\n            --bs-white-rgb: 255, 255, 255;\n            --bs-black-rgb: 0, 0, 0;\n            --bs-body-color-rgb: 3, 27, 78;\n            --bs-body-bg-rgb: 255, 255, 255;\n            --bs-font-sans-serif: system-ui, -apple-system, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial, \"Noto Sans\", \"Liberation Sans\", sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\", \"Noto Color Emoji\";\n            --bs-font-monospace: SFMono-Regular, Menlo, Monaco, Consolas, \"Liberation Mono\", \"Courier New\", monospace;\n            --bs-gradient: linear-gradient(180deg, rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0));\n            --bs-body-font-family: var(--bs-font-sans-serif);\n            --bs-body-font-size: 0.875rem;\n            --bs-body-font-weight: 400;\n            --bs-body-line-height: 1.5;\n            --bs-body-color: #031b4e;\n            --bs-body-bg: #fff; }\n\n        *,\n        *::before,\n        *::after {\n            box-sizing: border-box; }\n\n        @media (prefers-reduced-motion: no-preference) {\n            :root {\n                scroll-behavior: smooth; } }\n\n        body {\n            margin: 0;\n            font-family: var(--bs-body-font-family);\n            font-size: var(--bs-body-font-size);\n            font-weight: var(--bs-body-font-weight);\n            line-height: var(--bs-body-line-height);\n            color: var(--bs-body-color);\n            text-align: var(--bs-body-text-align);\n            background-color: var(--bs-body-bg);\n            -webkit-text-size-adjust: 100%;\n            -webkit-tap-highlight-color: rgba(0, 0, 0, 0); }\n\n        h1, .h1, h2, .h2, h6, .h6 {\n            margin-top: 0;\n            margin-bottom: 0.5rem;\n            font-weight: 500;\n            line-height: 1.2; }\n\n        h1, .h1 {\n            font-size: calc(1.34375rem + 1.125vw); }\n        @media (min-width: 1200px) {\n            h1, .h1 {\n                font-size: 2.1875rem; } }\n\n        h2, .h2 {\n            font-size: calc(1.3rem + 0.6vw); }\n        @media (min-width: 1200px) {\n            h2, .h2 {\n                font-size: 1.75rem; } }\n\n        h6, .h6 {\n            font-size: 0.875rem; }\n\n        address {\n            margin-bottom: 1rem;\n            font-style: normal;\n            line-height: inherit; }\n\n        a {\n            color: #3366ff;\n            text-decoration: underline; }\n        a:hover {\n            color: #2952cc;\n            text-decoration: none; }\n\n        a:not([href]):not([class]), a:not([href]):not([class]):hover {\n            color: inherit;\n            text-decoration: none; }\n\n        ::-moz-focus-inner {\n            padding: 0;\n            border-style: none; }\n\n        ::-webkit-datetime-edit-fields-wrapper,\n        ::-webkit-datetime-edit-text,\n        ::-webkit-datetime-edit-minute,\n        ::-webkit-datetime-edit-hour-field,\n        ::-webkit-datetime-edit-day-field,\n        ::-webkit-datetime-edit-month-field,\n        ::-webkit-datetime-edit-year-field {\n            padding: 0; }\n\n        ::-webkit-inner-spin-button {\n            height: auto; }\n\n         \n        ::-webkit-search-decoration {\n            -webkit-appearance: none; }\n\n        ::-webkit-color-swatch-wrapper {\n            padding: 0; }\n\n        ::file-selector-button {\n            font: inherit; }\n\n        ::-webkit-file-upload-button {\n            font: inherit;\n            -webkit-appearance: button; }\n\n        .btn {\n            display: inline-block;\n            font-weight: 400;\n            line-height: 1.5;\n            color: #031b4e;\n            text-align: center;\n            text-decoration: none;\n            vertical-align: middle;\n            cursor: pointer;\n            user-select: none;\n            background-color: transparent;\n            border: 1px solid transparent;\n            padding: 0.375rem 0.75rem;\n            font-size: 0.875rem;\n            border-radius: 3px;\n            transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out; }\n        @media (prefers-reduced-motion: reduce) {\n            .btn {\n                transition: none; } }\n        .btn:hover {\n            color: #031b4e; }\n        .btn:focus {\n            outline: 0;\n            box-shadow: none; }\n        .btn:disabled {\n            pointer-events: none;\n            opacity: 0.65; }\n\n        @keyframes progress-bar-stripes {\n            0% {\n                background-position-x: 1rem; } }\n\n         \n\n         \n\n         \n\n        @keyframes spinner-border {\n            to {\n                transform: rotate(360deg)  ; } }\n\n        @keyframes spinner-grow {\n            0% {\n                transform: scale(0); }\n            50% {\n                opacity: 1;\n                transform: none; } }\n\n        @keyframes placeholder-glow {\n            50% {\n                opacity: 0.2; } }\n\n        @keyframes placeholder-wave {\n            100% {\n                mask-position: -200% 0%; } }\n\n         \n\n         \n\n         \n         \n\n         \n\n         \n\n         \n\n         \n\n         \n\n         \n\n         \n        .btn {\n            border-width: 0;\n            line-height: 1.538;\n            padding: 9px 20px;\n            border-radius: 0;\n            transition: none;\n            min-height: 38px; }\n        .btn:active, .btn:focus {\n            box-shadow: none; }\n\n        [class*=btn-outline-] {\n            padding: 0.4rem 1rem;\n            line-height: 1.657;\n            border-width: 1px;\n            background-color: transparent; }\n        [class*=btn-outline-]:hover-focus {\n            color: #fff; }\n\n        .btn-outline-indigo {\n            border-color: #5b47fb;\n            color: #5b47fb; }\n        .btn-outline-indigo:hover-focus {\n            background-color: #5b47fb; }\n\n\n        body {\n            font-family: \"Roboto\", sans-serif; }\n\n        .az-body {\n            min-height: 100vh;\n            display: flex;\n            flex-direction: column;\n            justify-content: flex-start;\n            position: relative; }\n\n        .az-body::before {\n            content: 'az';\n            position: fixed;\n            top: 45%;\n            left: 70%;\n            transform: translate3d(-50%, -58%, 0);\n            font-size: 1300px;\n            font-weight: 600;\n            letter-spacing: -10px;\n            line-height: .5;\n            opacity: .02;\n            z-index: -1;\n            display: none; }\n\n        .az-error-wrapper {\n            flex: 1;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            flex-direction: column;\n            padding: 20px;\n            text-align: center; }\n        .az-error-wrapper h1, .az-error-wrapper .h1 {\n            line-height: 1;\n            font-size: 150px;\n            font-weight: 700; }\n        .az-error-wrapper h2, .az-error-wrapper .h2 {\n            font-weight: 500;\n            color: #3b4863;\n            letter-spacing: -.5px;\n            margin-bottom: 15px; }\n        .az-error-wrapper h6, .az-error-wrapper .h6 {\n            margin-bottom: 40px;\n            font-size: 14px; }\n        .az-error-wrapper .btn {\n            border-width: 2px;\n            font-weight: 700; }\n\n        @keyframes slide-down {\n            0% {\n                opacity: 0;\n                transform: translateY(15%); }\n            100% {\n                opacity: 1;\n                transform: translateY(0); } }\n\n        .logo {\n            font-weight: 700;\n            font-family: Poppins,sans-serif;\n            text-transform: lowercase;\n            color: #5b47fb;\n            letter-spacing: -6px;\n            display: flex;\n            align-items: center;\n            position: relative;\n        }\n\n    </style>\n</head>\n<body class=\"az-body\">\n<div class=\"az-error-wrapper\">\n    <h1 class=\"logo\">Fasten</h1>\n    <h2 id=\"titleContent\"></h2>\n    <h6 id=\"messageContent\">This window will redirect automatically...</h6>\n    <a id=\"redirectLink\" style=\"display:none\" class=\"btn btn-outline-indigo\">Continue</a>\n</div>\n\n<script>\nfunction callback(queryString, fragmentString){\n    //get the query params from the url\n    let responseQueryParams = mergeQueryFragmentParams(queryString, fragmentString)\n\n    //get state from the url\n    let state = responseQueryParams.get(\"state\")\n\n    if(!state){\n        console.error(\"No state detected in query or fragment string: \", responseQueryParams.toString())\n        return\n    }\n\n    let originUrl = localStorage.getItem(`${state}.origin_url`.toLowerCase());\n    let desktopMode = localStorage.getItem(`${state}.desktop_mode`.toLowerCase()) === \"true\";\n    let endpointId = localStorage.getItem(`${state}.endpoint_id`.toLowerCase());\n    let portalId = localStorage.getItem(`${state}.portal_id`.toLowerCase());\n    let brandId = localStorage.getItem(`${state}.brand_id`.toLowerCase());\n\n    console.debug(\"originUrl: \", originUrl)\n    console.debug(\"desktopMode: \", desktopMode)\n    console.debug(\"endpointId: \", endpointId)\n    console.debug(\"portalId: \", portalId)\n    console.debug(\"brandId: \", brandId)\n\n    //no matter what we do, we need to remove the origin_url and desktop_mode from local storage\n    localStorage.removeItem(`${state}.origin_url`.toLowerCase())\n    localStorage.removeItem(`${state}.desktop_mode`.toLowerCase())\n    localStorage.removeItem(`${state}.endpoint_id`.toLowerCase())\n    localStorage.removeItem(`${state}.portal_id`.toLowerCase())\n    localStorage.removeItem(`${state}.brand_id`.toLowerCase())\n\n    //get a reference to the redirect link button, which the user can click if we're taking too long\n    var redirectLink = document.getElementById(\"redirectLink\");\n\n\n\n    //update the page with the status\n    let pageStatus = pageStatusData(responseQueryParams, desktopMode)\n    document.getElementById(\"titleContent\").innerText = pageStatus.title\n    document.getElementById(\"messageContent\").innerText = pageStatus.message\n\n    //parse the origin url\n    let originUrlParts = new window.URL(originUrl)\n\n    if(desktopMode){\n\n        //calculate the origin url\n        var hashParts = (originUrlParts.hash || '').split('?')\n        var hashPath = hashParts[0]\n\n        //check if we're in postMessage mode\n        if(window.opener){\n            //since we're in desktop+postMessage mode, we're going to use the postMessage api to send the code back to the app\n\n            //in this mode the user can't really do much,so the redirect link should be hidden (or just close the external window)\n            redirectLink.style.display = \"none\";\n\n            console.log(\"sending message to opening window...\")\n            window.opener.postMessage(JSON.stringify({\n                success:pageStatus.success,\n                data: {\n                    params: Object.fromEntries(responseQueryParams),\n                    route: hashPath\n                }\n            }), \"*\")\n            window.addEventListener(\"message\", (event) => {\n\n                console.log(\"received close:true message, waiting 5 seconds before closing\")\n                setTimeout(function() {\n                    window.close()\n                }, 4000);\n            })\n\n            redirectLink.setAttribute('href', 'javascript:window.close();');\n\n        } else {\n            //we're not in postMessage mode, so instead we're goign to redirect back to the (modified) origin url.\n            var hashQuery = responseQueryParams //replace the query param in the hash with the ones from the current url\n            originUrlParts.hash = hashPath + '?' + hashQuery.toString()\n\n            console.log(\"redirecting to url: \", originUrlParts.toString())\n            redirectLink.setAttribute('href', originUrlParts.toString());\n\n            setTimeout(function() {\n                window.location.replace(originUrlParts.toString());\n            }, 500);\n        }\n    } else {\n        // we're in browser mode, so we're going to redirect back to the origin url (postMessage mode not supported here)\n        if(!originUrl){\n            throw new Error(\"No origin url detected\")\n        }\n\n        //set the query params on the origin url\n        originUrlParts.search = responseQueryParams; //parse the code (or error) from the query params, set on originUrl\n        originUrlParts.hash = ''\n\n        console.log(\"redirecting to url: \", originUrlParts.toString())\n        redirectLink.setAttribute('href', originUrlParts.toString());\n\n        setTimeout(function() {\n            window.location.replace(originUrlParts.toString());\n        }, 500);\n\n    }\n}\n\n// determine the user facing messages, based on the response from the provider\nfunction pageStatusData(responseQueryParams, desktopMode){\n    let success = !responseQueryParams.has(\"error\")\n    let title = ''\n    let message = ''\n\n\n    if(success){\n        title = `Your account has been securely connected to FASTEN.`\n        if(desktopMode){\n            message = 'Please wait, this window will close automatically...'\n        } else {\n            message = 'You will be redirected automatically...'\n        }\n    } else {\n        //failed\n        title = `An error occurred while connecting external account to FASTEN.`\n        message = responseQueryParams.get(\"error\") + \" | \" + responseQueryParams.get(\"error_description\")\n    }\n\n    return {\n        success: success,\n        title: title,\n        message: message\n    }\n}\n\n\n// merge the query parameters and fragments together\n// this is necessary because some providers send the code in the fragment, and some send it in the querystring\n//\n// ie. lighthouse.com/v1/callback/aetna#code=1234&state=5678\n// or lighthouse.com/v1/callback/aetna?code=1234&state=5678\nfunction mergeQueryFragmentParams(queryString, fragmentString){\n    //validate\n    if(!queryString && !fragmentString){\n        console.error(\"No query or fragment string provided\")\n        throw new Error(\"No query or fragment string provided\")\n    }\n\n\n    //lets handle both of those cases by parsing the querystrings from the hash and search params\n    var searchParams = new URLSearchParams(queryString)\n    var hashParams = new URLSearchParams(fragmentString)\n\n    //then merge them together\n    for (var p of hashParams) {\n        searchParams.append(p[0], p[1])\n    }\n    return searchParams\n}\n\nif (typeof exports !== 'undefined') {\n    module.exports.callback = callback\n    module.exports.pageStatusData = pageStatusData\n    module.exports.mergeQueryFragmentParams = mergeQueryFragmentParams\n}\n\n\ncallback(window.location.search, window.location.hash.substring(1));\n\n</script>\n</body>\n</html>\n"
          },
          "redirectURL": "",
          "headersSize": 155,
          "bodySize": 16775
        },
        "cache": {},
        "timings": {
          "blocked": 271,
          "dns": 13,
          "connect": 127,
          "ssl": 132,
          "send": 0,
          "wait": 894,
          "receive": 129
        },
        "time": 1566,
        "_securityState": "secure",
        "serverIPAddress": "52.7.83.206",
        "connection": "443",
        "pageref": "page_15"
      }
    ]
  }
}