{
  "log": {
    "version": "1.2",
    "creator": {
      "name": "Firefox",
      "version": "138.0.3"
    },
    "browser": {
      "name": "Firefox",
      "version": "138.0.3"
    },
    "pages": [
      {
        "id": "page_1",
        "pageTimings": {
          "onContentLoad": -11,
          "onLoad": -11
        },
        "startedDateTime": "2025-05-16T16:24:48.700+03:00",
        "title": "https://fhir.epic.com/mychart-fhir/Authentication/Login?postloginurl=inside%2Easp%3Fmode%3Doauthlogin%26liteMode%3Dtrue%26forceAuthn%3Dtrue&liteMode=true&forceAuthn=true"
      }
    ],
    "entries": [
      {
        "startedDateTime": "2025-05-16T16:24:48.700+03:00",
        "request": {
          "bodySize": 0,
          "method": "GET",
          "url": "https://lighthouse.fastenhealth.com/sandbox/redirect/1e84bc4b-be8f-45d6-ad47-d621b00212a4?origin_url=http%3A%2F%2Flocalhost%3A9090%2Fweb%2Fsources%2Fcallback%2F1e84bc4b-be8f-45d6-ad47-d621b00212a4&dest_url=https%3A%2F%2Ffhir.epic.com%2Finterconnect-fhir-oauth%2Foauth2%2Fauthorize%3Fredirect_uri%3Dhttps%253A%252F%252Flighthouse.fastenhealth.com%252Fsandbox%252Fcallback%252Fepic%26response_type%3Dcode%26response_mode%3Dfragment%26state%3D1e84bc4b-be8f-45d6-ad47-d621b00212a4%26client_id%3Da2436bd1-238f-4f74-8e5a-af0dbd6ff1df%26scope%3Dopenid%2BfhirUser%2Bprofile%26aud%3Dhttps%253A%252F%252Ffhir.epic.com%252Finterconnect-fhir-oauth%252Fapi%252FFHIR%252FR4%252F%26code_challenge%3DkT0kkk7WempiCYTAAdRWWuUDw3oT36Pu58mB_ITo_UY%26code_challenge_method%3DS256&desktop_mode=false&brand_id=e16b9952-8885-4905-b2e3-b0f04746ed5c&portal_id=2727ec27-67e9-475a-bea1-423102beaa1d&endpoint_id=8e2f5de7-46ac-4067-96ba-5e3f60ad52a4",
          "httpVersion": "HTTP/2",
          "headers": [
            {
              "name": "Host",
              "value": "lighthouse.fastenhealth.com"
            },
            {
              "name": "User-Agent",
              "value": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:138.0) Gecko/20100101 Firefox/138.0"
            },
            {
              "name": "Accept",
              "value": "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8"
            },
            {
              "name": "Accept-Language",
              "value": "en-US,en;q=0.5"
            },
            {
              "name": "Accept-Encoding",
              "value": "gzip, deflate, br, zstd"
            },
            {
              "name": "Connection",
              "value": "keep-alive"
            },
            {
              "name": "Referer",
              "value": "http://localhost:9090/"
            },
            {
              "name": "Upgrade-Insecure-Requests",
              "value": "1"
            },
            {
              "name": "Sec-Fetch-Dest",
              "value": "document"
            },
            {
              "name": "Sec-Fetch-Mode",
              "value": "navigate"
            },
            {
              "name": "Sec-Fetch-Site",
              "value": "cross-site"
            },
            {
              "name": "Sec-Fetch-User",
              "value": "?1"
            },
            {
              "name": "Priority",
              "value": "u=0, i"
            },
            {
              "name": "Pragma",
              "value": "no-cache"
            },
            {
              "name": "Cache-Control",
              "value": "no-cache"
            }
          ],
          "cookies": [],
          "queryString": [
            {
              "name": "origin_url",
              "value": "http://localhost:9090/web/sources/callback/1e84bc4b-be8f-45d6-ad47-d621b00212a4"
            },
            {
              "name": "dest_url",
              "value": "https://fhir.epic.com/interconnect-fhir-oauth/oauth2/authorize?redirect_uri=https%3A%2F%2Flighthouse.fastenhealth.com%2Fsandbox%2Fcallback%2Fepic&response_type=code&response_mode=fragment&state=1e84bc4b-be8f-45d6-ad47-d621b00212a4&client_id=a2436bd1-238f-4f74-8e5a-af0dbd6ff1df&scope=openid+fhirUser+profile&aud=https%3A%2F%2Ffhir.epic.com%2Finterconnect-fhir-oauth%2Fapi%2FFHIR%2FR4%2F&code_challenge=kT0kkk7WempiCYTAAdRWWuUDw3oT36Pu58mB_ITo_UY&code_challenge_method=S256"
            },
            {
              "name": "desktop_mode",
              "value": "false"
            },
            {
              "name": "brand_id",
              "value": "e16b9952-8885-4905-b2e3-b0f04746ed5c"
            },
            {
              "name": "portal_id",
              "value": "2727ec27-67e9-475a-bea1-423102beaa1d"
            },
            {
              "name": "endpoint_id",
              "value": "8e2f5de7-46ac-4067-96ba-5e3f60ad52a4"
            }
          ],
          "headersSize": 1430
        },
        "response": {
          "status": 200,
          "statusText": "",
          "httpVersion": "HTTP/2",
          "headers": [
            {
              "name": "date",
              "value": "Fri, 16 May 2025 13:24:51 GMT"
            },
            {
              "name": "content-type",
              "value": "text/html"
            },
            {
              "name": "content-length",
              "value": "2016"
            },
            {
              "name": "apigw-requestid",
              "value": "KqZpOiF9oAMEcYQ="
            },
            {
              "name": "X-Firefox-Spdy",
              "value": "h2"
            }
          ],
          "cookies": [],
          "content": {
            "mimeType": "text/html",
            "size": 2016,
            "text": "<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n\n    \n    <meta charset=\"utf-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1, shrink-to-fit=no\">\n\n\n    \n    <meta name=\"description\" content=\"Fasten redirecting to Epic (Sandbox)\">\n    <meta name=\"author\" content=\"Fasten\">\n\n    <title>Fasten redirecting to Epic (Sandbox)</title>\n\n</head>\n<body>\nRedirecting ...\n<script>\nfunction redirect(state, queryString) {\n    console.log(\"getting url query parameters...\")\n    // const queryString = window.location.search;\n    const urlParams = new URLSearchParams(queryString);\n    const originUrl = urlParams.get('origin_url')\n    const destUrl = urlParams.get('dest_url')\n    const endpointId = urlParams.get('endpoint_id')\n    const portalId = urlParams.get('portal_id')\n    const brandId = urlParams.get('brand_id')\n    const desktopMode = urlParams.get('desktop_mode') || \"false\"\n\n    let errorMessage = \"\"\n\n    //validate state\n    if(!originUrl){\n        errorMessage = `No origin url (origin_url) detected: ${urlParams.toString()}`\n        console.error(errorMessage)\n        throw new Error(errorMessage)\n    }\n    if(!destUrl){\n        errorMessage = `No destination url (dest_url) detected: ${urlParams.toString()}`\n        console.error(errorMessage)\n        throw new Error(errorMessage)\n    }\n\n    //store state in local storage for use in callback function\n    localStorage.setItem(`${state}.origin_url`.toLowerCase(), originUrl);\n    localStorage.setItem(`${state}.desktop_mode`.toLowerCase(), desktopMode);\n    localStorage.setItem(`${state}.endpoint_id`.toLowerCase(), endpointId);\n    localStorage.setItem(`${state}.portal_id`.toLowerCase(), portalId);\n    localStorage.setItem(`${state}.brand_id`.toLowerCase(), brandId);\n\n\n    //todo add validation for allowed urls\n\n    return destUrl;\n}\nif (typeof exports !== 'undefined') {\n    module.exports = redirect;\n}\n\n\nwindow.location.replace(redirect(\"1e84bc4b-be8f-45d6-ad47-d621b00212a4\", window.location.search));\n</script>\n</body>\n</html>\n"
          },
          "redirectURL": "",
          "headersSize": 154,
          "bodySize": 2170
        },
        "cache": {},
        "timings": {
          "blocked": 260,
          "dns": 1,
          "connect": 123,
          "ssl": 137,
          "send": 0,
          "wait": 2117,
          "receive": 0
        },
        "time": 2638,
        "_securityState": "secure",
        "serverIPAddress": "52.7.83.206",
        "connection": "443",
        "pageref": "page_1"
      }
    ]
  }
}