<div class="az-content az-content-app pd-b-0">
    <div class="container">
        <div class="az-content-body">

            <!-- Top Section: Search + Filter -->
            <div class="d-flex align-items-center mb-4">
                <div class="input-group me-3 mr-4" style="max-width: 400px;">
                    <input type="text" class="form-control" placeholder="Search..." [(ngModel)]="searchQuery"
                        (keyup.enter)="search()" />
                    <button class="btn btn-outline-secondary" type="button" *ngIf="searchQuery"
                        (click)="searchQuery = ''; search()">
                        âœ•
                    </button>
                </div>

                <select class="form-control" style="max-width: 250px;" [(ngModel)]="selectedResourceType"
                    (change)="search()">
                    <option value="">All Resource Types</option>
                    <option *ngFor="let type of supportedTypes" [value]="type">
                        {{ type }}
                    </option>
                </select>
            </div>

            <!-- Center Section: Cards -->
            <div class="row">
                <div class="col-md-4 mb-4" *ngFor="let doc of results">
                    <div class="card p-3"
                        style="background-color: var(--dark-alert-background-color); color: var(--dark-alert-text-color); cursor: pointer;"
                        (click)="viewResource(doc)">
                        <h5 class="mb-2">{{ doc.sort_title || 'Untitled' }}</h5>
                        <p class="mb-1"><strong>Type:</strong> {{ doc.source_resource_type }}</p>
                        <p class="mb-0"><strong>Date:</strong> {{ doc.sort_date || 'N/A' }}</p>
                    </div>
                </div>
            </div>

            <!-- Bottom Section: Pagination -->
            <div class="d-flex justify-content-between align-items-center mt-1">
                <div class="d-flex align-items-center">
                    <label for="perPageSelect" class="me-2 mb-0 mr-2">Results per page:</label>
                    <select id="perPageSelect" class="form-control me-3" style="width: 100px;" [(ngModel)]="perPage"
                        (change)="onPerPageChange()">
                        <option [value]="5">5</option>
                        <option [value]="10">10</option>
                        <option [value]="20">20</option>
                        <option [value]="50">50</option>
                    </select>

                    <span class="text-muted ml-4">Total results: {{ totalResults }}</span>
                </div>

                <div class="d-flex align-items-center">
                    <span class="me-3 mr-4">Page {{ page }} of {{ totalPages }}</span>
                    <nav>
                        <ul class="pagination mb-0">
                            <li class="page-item mr-2 p-1" [class.disabled]="page === 1">
                                <a class="page-link full-width-link" (click)="onPageChange(page - 1)">Previous</a>
                            </li>
                            <li class="page-item p-1" [class.disabled]="page >= totalPages">
                                <a class="page-link full-width-link" (click)="onPageChange(page + 1)">Next</a>
                            </li>
                        </ul>
                    </nav>
                </div>
            </div>
        </div><!-- az-content-body -->
    </div><!-- container -->
</div><!-- az-content -->